# Regras do Cursor para o Projeto Docildos

## Visão Geral do Projeto
Docildos é um sistema de gestão de confeitaria com IA, composto por:
- **Frontend**: React + TypeScript + Vite + shadcn/ui + Tailwind CSS
- **Backend**: FastAPI (Python) com SQLAlchemy e Alembic
- **AI Service**: Python com LangGraph para orquestração de agentes

## Padrões de Código

### Frontend (React/TypeScript)
- Use componentes funcionais com hooks
- Prefira TypeScript estrito com tipos explícitos
- Use componentes do shadcn/ui quando disponíveis
- Siga a estrutura de pastas: `components/`, `pages/`, `hooks/`, `lib/`
- Use Tailwind CSS para estilização
- Componentes devem ser exportados como named exports
- Use `react-hook-form` com `zod` para validação de formulários
- Use `@tanstack/react-query` para gerenciamento de estado do servidor

### Backend (FastAPI)
- Use type hints em todas as funções
- Siga a estrutura: `models/`, `schemas/`, `api/`, `services/`
- Use Pydantic schemas para validação de entrada/saída
- Use SQLAlchemy ORM para acesso ao banco de dados
- Use Alembic para migrações de banco de dados
- Endpoints devem retornar JSON com schemas Pydantic
- Trate erros adequadamente com HTTPException
- Use async/await para operações assíncronas

### AI Service (Python)
- Use LangGraph para orquestração de agentes
- Mantenha ferramentas (tools) em módulos separados
- Use type hints e docstrings
- Siga a estrutura: `agents/`, `tools/`
- Ferramentas devem ser independentes e reutilizáveis

## Convenções de Nomenclatura

### Arquivos e Diretórios
- Frontend: PascalCase para componentes (`ChatInput.tsx`)
- Backend: snake_case para arquivos Python (`pedidos.py`)
- Diretórios: lowercase com hífens se necessário

### Variáveis e Funções
- TypeScript: camelCase (`getUserData`)
- Python: snake_case (`get_user_data`)
- Constantes: UPPER_SNAKE_CASE (`MAX_RETRIES`)

### Componentes React
- Nomes em PascalCase
- Props devem ser tipadas com interfaces ou types
- Use `interface` para props de componentes

## Estrutura de Commits
- Use mensagens descritivas em português brasileiro
- Formato: `tipo: descrição breve`
- Tipos: `feat`, `fix`, `docs`, `refactor`, `test`, `chore`

## Tratamento de Erros
- Frontend: Use try/catch e exiba mensagens amigáveis ao usuário
- Backend: Retorne códigos HTTP apropriados (400, 404, 500, etc.)
- Logs: Use logging adequado para debug e monitoramento

## Performance
- Use React.memo quando apropriado
- Lazy loading para rotas e componentes grandes
- Otimize queries do banco de dados
- Use índices apropriados no banco de dados

## Segurança
- Valide todas as entradas do usuário
- Use variáveis de ambiente para secrets
- Não commite credenciais ou tokens
- Use HTTPS em produção

## Testes
- Escreva testes para lógica crítica
- Testes devem ser independentes e determinísticos
- Use mocks quando necessário

## Documentação
- Documente funções complexas com docstrings/comentários
- Mantenha README.md atualizado
- Documente APIs com docstrings do FastAPI

## Dependências
- Mantenha `requirements.txt` e `package.json` atualizados
- Use versões específicas em produção
- Documente dependências opcionais

## Git
- Não commite arquivos gerados ou temporários
- Use `.gitignore` adequadamente
- Ambientes virtuais (`.venv/`, `node_modules/`) não devem ser commitados

